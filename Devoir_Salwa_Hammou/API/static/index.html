<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<div id="app"></div>
<script type="text/babel" data-presets="react" data-type="module">
  import React from "https://esm.sh/react@18";
  import ReactDOM from "https://esm.sh/react-dom@18";

  //definition fonction (contient logique et rendu de l'interface utilisateur)
  function App() {
    //declaration des variables d'etat
    const [articles, setArticles] = React.useState([]); //initialisation d'un tableau vide qui contiendra la liste des articles contenu dans code python associé
    const [title, setTitle] = React.useState(""); // Titre du nouvel article
    const [content, setContent] = React.useState(""); // Contenu du nouvel article
    //fonction pour récupérer les titres des articles contenu dans le code python asssocié
    async function fetchTitlesArticle() {
      const res = await fetch("/articles"); //fait une requête get vers l'endpoint // dont le contenu se trouve dans le code python associé
      const json = await res.json(); //on convertit la réponse en json
      setArticles(json); //met à jour la variable "articles" avec les données reçues

    }
    React.useEffect(() => {
      fetchTitlesArticle();
    }, []);
    return (
      <div>
        <h1>Liste des Articles</h1>
        <ul>
          {articles.map((article, index) => (
            <li key={index}>
              <a href={`post.html?articleId=${article.id}`}>
                  <strong>{article.title}</strong>
                </a>
            </li>
          ))}
        </ul>
      </div>
    );
  }
    
  // mettre ceci à la ligne 28 si on veut aussi ajouter le contenu des articles à la suite du titre des articles <strong>{article.title}</strong>: {article.content}
  const appContainer = document.getElementById("app");
  ReactDOM.createRoot(appContainer).render(<App />);
</script>